/**
 * JavaScript code that provides the puppeteer utilities. See the
 * [README](https://github.com/puppeteer/puppeteer/blob/main/src/injected/README.md)
 * for injection for more information.
 *
 * @internal
 */
export declare const source = "\"use strict\";var C=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var re=Object.prototype.hasOwnProperty;var u=(e,t)=>{for(var n in t)C(e,n,{get:t[n],enumerable:!0})},oe=(e,t,n,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let o of ne(t))!re.call(e,o)&&o!==n&&C(e,o,{get:()=>t[o],enumerable:!(r=te(t,o))||r.enumerable});return e};var se=e=>oe(C({},\"__esModule\",{value:!0}),e);var Te={};u(Te,{default:()=>Ee});module.exports=se(Te);var x=class extends Error{constructor(t){super(t),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}},S=class extends x{},v=class extends x{#e;#t=\"\";set code(t){this.#e=t}get code(){return this.#e}set originalMessage(t){this.#t=t}get originalMessage(){return this.#t}},Ce=Object.freeze({TimeoutError:S,ProtocolError:v});function h(e){let t=!1,n=!1,r,o,s=new Promise((l,a)=>{r=l,o=a}),i=e&&e.timeout>0?setTimeout(()=>{n=!0,o(new S(e.message))},e.timeout):void 0;return Object.assign(s,{resolved:()=>t,finished:()=>t||n,resolve:l=>{i&&clearTimeout(i),t=!0,r(l)},reject:l=>{clearTimeout(i),n=!0,o(l)}})}var B=new Map,X=e=>{let t=B.get(e);return t||(t=new Function(`return ${e}`)(),B.set(e,t),t)};var k={};u(k,{ariaQuerySelector:()=>ie,ariaQuerySelectorAll:()=>A});var ie=(e,t)=>window.__ariaQuerySelector(e,t),A=async function*(e,t){yield*await window.__ariaQuerySelectorAll(e,t)};var O={};u(O,{customQuerySelectors:()=>R});var I=class{#e=new Map;register(t,n){if(!n.queryOne&&n.queryAll){let r=n.queryAll;n.queryOne=(o,s)=>{for(let i of r(o,s))return i;return null}}else if(n.queryOne&&!n.queryAll){let r=n.queryOne;n.queryAll=(o,s)=>{let i=r(o,s);return i?[i]:[]}}else if(!n.queryOne||!n.queryAll)throw new Error(\"At least one query method must be defined.\");this.#e.set(t,{querySelector:n.queryOne,querySelectorAll:n.queryAll})}unregister(t){this.#e.delete(t)}get(t){return this.#e.get(t)}clear(){this.#e.clear()}},R=new I;var _={};u(_,{pierceQuerySelector:()=>le,pierceQuerySelectorAll:()=>ae});var le=(e,t)=>{let n=null,r=o=>{let s=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let i=s.currentNode;i.shadowRoot&&r(i.shadowRoot),!(i instanceof ShadowRoot)&&i!==o&&!n&&i.matches(t)&&(n=i)}while(!n&&s.nextNode())};return e instanceof Document&&(e=e.documentElement),r(e),n},ae=(e,t)=>{let n=[],r=o=>{let s=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT);do{let i=s.currentNode;i.shadowRoot&&r(i.shadowRoot),!(i instanceof ShadowRoot)&&i!==o&&i.matches(t)&&n.push(i)}while(s.nextNode())};return e instanceof Document&&(e=e.documentElement),r(e),n};var m=(e,t)=>{if(!e)throw new Error(t)};var E=class{#e;#t;#r;#n;constructor(t,n){this.#e=t,this.#t=n}async start(){let t=this.#n=h(),n=await this.#e();if(n){t.resolve(n);return}this.#r=new MutationObserver(async()=>{let r=await this.#e();r&&(t.resolve(r),await this.stop())}),this.#r.observe(this.#t,{childList:!0,subtree:!0,attributes:!0})}async stop(){m(this.#n,\"Polling never started.\"),this.#n.finished()||this.#n.reject(new Error(\"Polling stopped\")),this.#r&&(this.#r.disconnect(),this.#r=void 0)}result(){return m(this.#n,\"Polling never started.\"),this.#n}},T=class{#e;#t;constructor(t){this.#e=t}async start(){let t=this.#t=h(),n=await this.#e();if(n){t.resolve(n);return}let r=async()=>{if(t.finished())return;let o=await this.#e();if(!o){window.requestAnimationFrame(r);return}t.resolve(o),await this.stop()};window.requestAnimationFrame(r)}async stop(){m(this.#t,\"Polling never started.\"),this.#t.finished()||this.#t.reject(new Error(\"Polling stopped\"))}result(){return m(this.#t,\"Polling never started.\"),this.#t}},N=class{#e;#t;#r;#n;constructor(t,n){this.#e=t,this.#t=n}async start(){let t=this.#n=h(),n=await this.#e();if(n){t.resolve(n);return}this.#r=setInterval(async()=>{let r=await this.#e();r&&(t.resolve(r),await this.stop())},this.#t)}async stop(){m(this.#n,\"Polling never started.\"),this.#n.finished()||this.#n.reject(new Error(\"Polling stopped\")),this.#r&&(clearInterval(this.#r),this.#r=void 0)}result(){return m(this.#n,\"Polling never started.\"),this.#n}};var j={};u(j,{pQuerySelector:()=>be,pQuerySelectorAll:()=>ee});var d=class{static async*map(t,n){for await(let r of t)yield await n(r)}static async*flatMap(t,n){for await(let r of t)yield*n(r)}static async collect(t){let n=[];for await(let r of t)n.push(r);return n}static async first(t){for await(let n of t)return n}};function G(e){return typeof e==\"object\"&&e!==null&&\"name\"in e&&\"message\"in e}var c;(function(e){e.Class=\"class\",e.Attribute=\"attribute\",e.Id=\"id\",e.Type=\"type\",e.Universal=\"universal\",e.PseudoElement=\"pseudo-element\",e.PseudoClass=\"pseudo-class\",e.Comma=\"comma\",e.Combinator=\"combinator\"})(c||(c={}));var p={[c.Attribute]:/\\[\\s*(?:(?<namespace>(?:\\\\.|[-\\w\\P{ASCII}])+|\\*)?\\|)?(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(\\s(?<caseSensitive>[iIsS]))?\\s*)?\\]/gu,[c.Id]:/#(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu,[c.Class]:/\\.(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu,[c.Comma]:/\\s*,\\s*/g,[c.Combinator]:/\\s*[\\s>+~]\\s*/g,[c.PseudoElement]:/::(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)(?:\\((?<argument>\u00B6+)\\))?/gu,[c.PseudoClass]:/:(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)(?:\\((?<argument>\u00B6+)\\))?/gu,[c.Universal]:/(?:(?<namespace>\\*|(?:\\\\.|[-\\w\\P{ASCII}])*)\\|)?\\*/gu,[c.Type]:/(?:(?<namespace>\\*|(?:\\\\.|[-\\w\\P{ASCII}])*)\\|)?(?<name>(?:\\\\.|[-\\w\\P{ASCII}])+)/gu},ce=new Set([c.Combinator,c.Comma]);var ue=e=>{switch(e){case c.PseudoElement:case c.PseudoClass:return new RegExp(p[e].source.replace(\"(?<argument>\\xB6+)\",\"(?<argument>.+)\"),\"gu\");default:return p[e]}};function fe(e,t=p){if(!e)return[];let n=[e];for(let o in t){let s=t[o];for(let i=0;i<n.length;i++){let l=n[i];if(typeof l!=\"string\")continue;s.lastIndex=0;let a=s.exec(l);if(!a)continue;let f=a.index-1,b=[],H=a[0],V=l.slice(0,f+1);V&&b.push(V),b.push({...a.groups,type:o,content:H});let z=l.slice(f+H.length+1);z&&b.push(z),n.splice(i,1,...b)}}let r=0;for(let o of n)switch(typeof o){case\"string\":throw new Error(`Unexpected sequence ${o} found at index ${r}`);case\"object\":r+=o.content.length,o.pos=[r-o.content.length,r],ce.has(o.type)&&(o.content=o.content.trim()||\" \");break}return n}function Y(e,t=p){if(!e)return[];e=e.trim();let n=[];{let o={escaped:!1};for(let s=0;s<e.length;++s)if(!o.escaped)switch(e[s]){case\"\\\\\":o.escaped=!0;break;case'\"':case\"'\":{if(!o.quoteState){o.quoteState=[e[s],s];continue}let i=o.quoteState[0];if(i!==e[s])continue;let l=o.quoteState[1],a=e.slice(o.quoteState[1],s+1);n.push({value:a,offset:l});let f=`${i}${\"\\xA7\".repeat(a.length-2)}${i}`;e=e.slice(0,l)+f+e.slice(l+a.length);break}}}{let o={escaped:!1,nesting:0,offset:0};for(let s=0;s<e.length;++s)if(!o.escaped)switch(e[s]){case\"\\\\\":o.escaped=!0;break;case\"(\":if(++o.nesting!==1)continue;o.offset=s;break;case\")\":{if(--o.nesting!==0)continue;let{offset:i}=o,l=e.slice(i,s+1);n.push({value:l,offset:i});let a=`(${\"\\xB6\".repeat(l.length-2)})`;e=e.slice(0,i)+a+e.slice(i+l.length);break}}}let r=fe(e,t);for(let o of n.reverse())for(let s of r){let{offset:i,value:l}=o;if(!(s.pos[0]<=i&&i+l.length<=s.pos[1]))continue;let a=s.content,f=i-s.pos[0];s.content=a.slice(0,f)+l+a.slice(f+l.length),s.__changed=s.content!==a}for(let o of r){if(!o.__changed)continue;delete o.__changed;let s=ue(o.type);s.lastIndex=0;let i=s.exec(o.content);if(!i)throw new Error(\"This shouldn't be possible!\");Object.assign(o,i.groups)}return r}p.combinator=new RegExp(`${/\\s*(?:>{3,4})\\s*|/.source}${p.combinator.source}`,\"g\");var q=class{#e=[];#t;constructor(t){this.#t=t}get length(){return this.#e.length}add(t){this.#e.push(t)}toStringAndClear(){let t=this.#e[0],n=this.#e[this.#e.length-1];return this.#e.splice(0),this.#t.slice(t.pos[0],n.pos[1])}},me=/\\\\[\\s\\S]/g,de=e=>{if(e.length>1){for(let t of['\"',\"'\"])if(!(!e.startsWith(t)||!e.endsWith(t)))return e.slice(t.length,-t.length).replace(me,n=>n.slice(1))}return e};function K(e){let t=Y(e);if(t.length===0)return[];let n=[],r=[n],o=[r],s=new q(e);for(let i of t){switch(i.type){case\"combinator\":switch(i.content){case\">>>\":s.length&&n.push(s.toStringAndClear()),n=[],r.push(\">>>\"),r.push(n);continue;case\">>>>\":s.length&&n.push(s.toStringAndClear()),n=[],r.push(\">>>>\"),r.push(n);continue}break;case\"pseudo-element\":if(!i.name.startsWith(\"-p-\"))break;s.length&&n.push(s.toStringAndClear()),n.push({name:i.name.slice(3),value:de(i.argument??\"\")});continue;case\"comma\":s.length&&n.push(s.toStringAndClear()),n=[],r=[n],o.push(r);continue}s.add(i)}return s.length&&n.push(s.toStringAndClear()),o}var D={};u(D,{textQuerySelectorAll:()=>P});var pe=new Set([\"checkbox\",\"image\",\"radio\"]),he=e=>e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&!pe.has(e.type),ge=new Set([\"SCRIPT\",\"STYLE\"]),w=e=>!ge.has(e.nodeName)&&!document.head?.contains(e),L=new WeakMap,Z=e=>{for(;e;)L.delete(e),e instanceof ShadowRoot?e=e.host:e=e.parentNode},J=new WeakSet,we=new MutationObserver(e=>{for(let t of e)Z(t.target)}),g=e=>{let t=L.get(e);if(t||(t={full:\"\",immediate:[]},!w(e)))return t;let n=\"\";if(he(e))t.full=e.value,t.immediate.push(e.value),e.addEventListener(\"input\",r=>{Z(r.target)},{once:!0,capture:!0});else{for(let r=e.firstChild;r;r=r.nextSibling){if(r.nodeType===Node.TEXT_NODE){t.full+=r.nodeValue??\"\",n+=r.nodeValue??\"\";continue}n&&t.immediate.push(n),n=\"\",r.nodeType===Node.ELEMENT_NODE&&(t.full+=g(r).full)}n&&t.immediate.push(n),e instanceof Element&&e.shadowRoot&&(t.full+=g(e.shadowRoot).full),J.has(e)||(we.observe(e,{childList:!0,characterData:!0}),J.add(e))}return L.set(e,t),t};var P=function*(e,t){let n=!1;for(let r of e.childNodes)if(r instanceof Element&&w(r)){let o;r.shadowRoot?o=P(r.shadowRoot,t):o=P(r,t);for(let s of o)yield s,n=!0}n||e instanceof Element&&w(e)&&g(e).full.includes(t)&&(yield e)};var $={};u($,{checkVisibility:()=>Se,deepChildren:()=>M,deepDescendents:()=>Q});var ye=[\"hidden\",\"collapse\"],Se=(e,t)=>{if(!e)return t===!1;if(t===void 0)return e;let n=e.nodeType===Node.TEXT_NODE?e.parentElement:e,r=window.getComputedStyle(n),o=r&&!ye.includes(r.visibility)&&!Pe(n);return t===o?e:!1};function Pe(e){let t=e.getBoundingClientRect();return t.width===0||t.height===0}function*M(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),n=t.nextNode();for(;n;n=t.nextNode())yield n.shadowRoot??n}function*Q(e){let t=[document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT)],n;for(;n=t.shift();)for(let r=n.nextNode();r;r=n.nextNode()){if(!r.shadowRoot){yield r;continue}t.push(document.createTreeWalker(r.shadowRoot,NodeFilter.SHOW_ELEMENT)),yield r.shadowRoot}}var U={};u(U,{xpathQuerySelectorAll:()=>F});var F=function*(e,t){let r=(e.ownerDocument||document).evaluate(t,e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),o;for(;o=r.iterateNext();)yield o};var y=class extends Error{constructor(t,n){super(`${t} is not a valid selector: ${n}`)}},W=class{#e;#t;#r=[];#n=void 0;elements;constructor(t,n,r){this.elements=[t],this.#e=n,this.#t=r,this.#o()}async run(){if(typeof this.#n==\"string\")switch(this.#n.trimStart()){case\":scope\":this.#o();break;default:this.#n=` ${this.#n}`;break}for(;this.#n!==void 0;this.#o()){let t=this.#n,n=this.#e;typeof t==\"string\"?this.elements=d.flatMap(this.elements,async function*(r){if(!r.parentElement){yield*r.querySelectorAll(t);return}let o=0;for(let s of r.parentElement.children)if(++o,s===r)break;yield*r.parentElement.querySelectorAll(`:scope > :nth-child(${o})${t}`)}):this.elements=d.flatMap(this.elements,async function*(r){switch(t.name){case\"text\":yield*P(r,t.value);break;case\"xpath\":yield*F(r,t.value);break;case\"aria\":yield*A(r,t.value);break;default:let o=R.get(t.name);if(!o)throw new y(n,`Unknown selector type: ${t.name}`);yield*o.querySelectorAll(r,t.value)}})}}#o(){if(this.#r.length!==0){this.#n=this.#r.shift();return}if(this.#t.length===0){this.#n=void 0;return}let t=this.#t.shift();switch(t){case\">>>>\":{this.elements=d.flatMap(this.elements,function*(n){yield*M(n)}),this.#o();break}case\">>>\":{this.elements=d.flatMap(this.elements,function*(n){yield*Q(n)}),this.#o();break}default:this.#r=t,this.#o();break}}},ee=async function*(e,t){let n;try{n=K(t)}catch(r){throw G(r)?new y(t,r.message):new y(t,String(r))}if(n.some(r=>{let o=0;return r.some(s=>(typeof s==\"string\"?++o:o=0,o>1))}))throw new y(t,\"Multiple deep combinators found in sequence.\");for(let r of n){let o=new W(e,t,r);o.run(),yield*o.elements}},be=async function(e,t){for await(let n of ee(e,t))return n;return null};var xe=Object.freeze({...k,...O,..._,...j,...D,...$,...U,createDeferredPromise:h,createFunction:X,createTextContent:g,IntervalPoller:N,isSuitableNodeForTextMatching:w,MutationPoller:E,RAFPoller:T}),Ee=xe;\n";
//# sourceMappingURL=injected.d.ts.map